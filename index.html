<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sarthi 2.0: The Indian Money Companion</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary-saffron: #FF9933; 
            --growth-green: #138808; 
            --trust-navy: #000080; 
            --bg-soft: #f4f7fa;
            --danger-red: #d32f2f;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background-color: var(--bg-soft); margin: 0; padding-bottom: 100px;
            transition: filter 0.6s ease;
        }

        body.shield-mode { filter: grayscale(100%) contrast(1.1); }

        /* 1. Family Runway Header */
        .runway-header { 
            background: linear-gradient(135deg, var(--trust-navy), #1a237e); 
            color: white; padding: 40px 20px 50px 20px; border-radius: 0 0 40px 40px;
            text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        .runway-count { font-size: 64px; font-weight: 900; display: block; line-height: 1; }
        .runway-unit { font-size: 14px; opacity: 0.8; letter-spacing: 2px; text-transform: uppercase; font-weight: 600; }
        .runway-subtext { font-size: 11px; margin-top: 15px; opacity: 0.6; font-style: italic; }

        .card { 
            background: white; margin: 15px; padding: 22px; border-radius: 28px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.06); position: relative;
        }

        .overlap-top { margin-top: -35px !important; z-index: 10; }

        /* 2. Emotional Mood Engine */
        .mood-box { display: flex; gap: 12px; overflow-x: auto; padding: 10px 0; -webkit-overflow-scrolling: touch; scrollbar-width: none; }
        .mood-btn { 
            flex: 0 0 auto; padding: 12px 20px; border-radius: 25px; background: #f0f2f5; 
            border: 2px solid transparent; font-size: 13px; cursor: pointer; transition: 0.3s;
        }
        .mood-btn.active { background: var(--primary-saffron); color: white; border-color: #fb8c00; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(255,153,51,0.3); }

        /* 3. Wealth Map (Indian Context) */
        .asset-row { display: flex; justify-content: space-between; align-items: center; padding: 14px 0; border-bottom: 1px solid #f0f0f0; }
        .asset-info { font-size: 14px; display: flex; align-items: center; gap: 10px; font-weight: 500; }
        .asset-val { font-family: 'Courier New', monospace; font-weight: 700; color: var(--trust-navy); }
        .gold-tag { border-left: 5px solid #FFD700; padding-left: 12px; margin-left: -12px; }

        /* 4. Pulse Check (Impulse Control) */
        input { width: 100%; padding: 16px; margin: 10px 0; border: 2px solid #eee; border-radius: 16px; font-size: 16px; box-sizing: border-box; }
        .btn-check { width: 100%; padding: 18px; background: var(--trust-navy); color: white; border: none; border-radius: 18px; font-weight: 700; font-size: 16px; cursor: pointer; }
        
        .nudge-overlay { 
            background: #fff9c4; border: 2px solid var(--primary-saffron); padding: 20px; 
            border-radius: 22px; margin-top: 20px; display: none;
        }

        /* Family Auditor Tile */
        .family-pill { background: #e3f2fd; display: flex; align-items: center; gap: 15px; padding: 15px; border-radius: 20px; margin-top: 15px; }
        .initials { width: 45px; height: 45px; background: var(--trust-navy); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; }

        /* Navigation */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; border-top: 1px solid #eee; padding: 12px 0; box-shadow: 0 -5px 20px rgba(0,0,0,0.05); }
        .nav-btn { flex: 1; text-align: center; font-size: 11px; color: #aaa; text-decoration: none; font-weight: 600; }
        .nav-btn.active { color: var(--trust-navy); }
    </style>
</head>
<body>

    <div class="runway-header">
        <span class="runway-unit">Family Safety Runway</span>
        <span class="runway-count" id="runway-display">164</span>
        <span class="runway-unit">Days of Freedom</span>
        <p class="runway-subtext">Calculated on ‚Çπ1,500 daily household burn rate</p>
    </div>

    <div class="card overlap-top">
        <h5 style="margin: 0 0 12px 0; color: #444;">Arjun, how are you feeling today?</h5>
        <div class="mood-box">
            <div class="mood-btn active" onclick="updateMood('Calm', this)">üòå Shanti</div>
            <div class="mood-btn" onclick="updateMood('Stressed', this)">üò∞ Overwhelmed</div>
            <div class="mood-btn" onclick="updateMood('Excited', this)">ü§ë Salary Day!</div>
            <div class="mood-btn" onclick="updateMood('Bored', this)">ü•± Bored</div>
        </div>
    </div>

    <div class="card">
        <h3 style="margin: 0 0 5px 0;">üõí Pulse Check</h3>
        <p style="font-size: 12px; color: #777; margin-bottom: 15px;">Pause. Look at the impact before you scan.</p>
        
        <input type="text" id="itemName" placeholder="What's the treat? (e.g., iPhone Case, Swiggy)">
        <input type="number" id="itemPrice" placeholder="Price (‚Çπ)">
        <button class="btn-check" onclick="processNudge()">Analyze Life-Cost</button>

        <div id="nudgeSection" class="nudge-overlay">
            <h4 style="margin: 0; color: var(--danger-red);">‚ö†Ô∏è "Log Kehenge" Logic Filter</h4>
            <p id="nudgeText" style="font-size: 14px; color: #333; line-height: 1.5; margin: 15px 0;"></p>
            
            <div style="background: white; padding: 15px; border-radius: 12px; font-size: 12px; margin-bottom: 15px; border-left: 4px solid var(--primary-saffron);">
                <b>Think:</b> Is this spend moving you closer to your "Home Downpayment" or just a 15-minute thrill?
            </div>

            <div style="display: flex; gap: 10px;">
                <button onclick="resolve('save')" style="background: var(--growth-green); color: white; border: none; padding: 15px; border-radius: 12px; flex: 1; font-weight: bold;">Invest Instead</button>
                <button onclick="resolve('spend')" style="background: #f5f5f5; color: #666; border: none; padding: 15px; border-radius: 12px; flex: 1; font-weight: bold;">I need this</button>
            </div>
        </div>
    </div>

    <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h4 style="margin: 0;">Family Wealth Map</h4>
            <span style="font-size: 11px; background: #e8f5e9; color: var(--growth-green); padding: 4px 10px; border-radius: 10px; font-weight: bold;">UP ‚Çπ4,200</span>
        </div>

        <div style="height: 160px; margin-bottom: 15px;">
            <canvas id="wealthChart"></canvas>
        </div>

        <div class="asset-row">
            <div class="asset-info">üè¶ SBI Savings</div>
            <div class="asset-val">‚Çπ65,200</div>
        </div>
        <div class="asset-row gold-tag">
            <div class="asset-info">üü° Physical Gold & SGB</div>
            <div class="asset-val">‚Çπ39,300</div>
        </div>
        <div class="asset-row">
            <div class="asset-info">üìà SIP (Large Cap)</div>
            <div class="asset-val">‚Çπ2,80,000</div>
        </div>

        <div class="family-pill">
            <div class="initials">P</div>
            <div style="flex-grow: 1;">
                <div style="font-size: 13px; font-weight: bold;">Auditor: Papa</div>
                <div style="font-size: 11px; color: #555;">Visibility: Safety Net & Goals only</div>
            </div>
            <div style="color: var(--growth-green); font-weight: bold;">ACTIVE</div>
        </div>

        <button style="background: none; border: 2px dashed #ddd; color: #999; width: 100%; padding: 12px; border-radius: 15px; margin-top: 20px; font-size: 12px; font-weight: 600;">
            + Connect Bank via AA Framework
        </button>
    </div>

    <div class="bottom-nav">
        <a href="#" class="nav-btn active">üè† Sarthi</a>
        <a href="#" class="nav-btn">üìä Wealth</a>
        <a href="#" class="nav-btn">üõ°Ô∏è Shield</a>
        <a href="#" class="nav-btn">üë• Family</a>
    </div>

    <script>
        const DAILY_BURN = 1500;
        const HOURLY_RATE = 450;
        let totalSavings = 384500;

        // Initialize Runway
        document.getElementById('runway-display').innerText = Math.floor(totalSavings / DAILY_BURN);

        function updateMood(mood, el) {
            document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            if(mood === 'Stressed') {
                document.body.classList.add('shield-mode');
                alert("Shield Mode ON: Logic filters will be stricter today to prevent stress-spending.");
            } else {
                document.body.classList.remove('shield-mode');
            }
        }

        function processNudge() {
            const price = document.getElementById('itemPrice').value;
            const name = document.getElementById('itemName').value;
            if(!price) return;

            const daysLost = (price / DAILY_BURN).toFixed(1);
            const hoursWorked = (price / HOURLY_RATE).toFixed(1);

            const nudgeBox = document.getElementById('nudgeSection');
            const nudgeText = document.getElementById('nudgeText');

            nudgeText.innerHTML = `Arjun, this <b>${name}</b> costs you <b>${hoursWorked} hours</b> of labor. üõãÔ∏è<br><br>Buying this kills <b>${daysLost} days</b> of your Family Safety Runway.`;
            
            nudgeBox.style.display = 'block';
            nudgeBox.scrollIntoView({ behavior: 'smooth' });
        }

        function resolve(choice) {
            if(choice === 'save') {
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                alert("Great choice! Redirecting funds to your 'Parents' Health' pot.");
            }
            document.getElementById('nudgeSection').style.display = 'none';
            document.getElementById('itemPrice').value = '';
            document.getElementById('itemName').value = '';
        }

        // Initialize Wealth Chart
        const ctx = document.getElementById('wealthChart').getContext('2d');
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Cash', 'Mutual Funds', 'Gold'],
                datasets: [{
                    data: [65200, 280000, 39300],
                    backgroundColor: ['#2196F3', '#138808', '#FFCC00'],
                    hoverOffset: 10,
                    borderWidth: 0
                }]
            },
            options: {
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'right', labels: { boxWidth: 15, font: { size: 11, weight: '600' } } }
                },
                cutout: '70%'
            }
        });
    </script>
</body>
</html>
   
