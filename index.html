<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sarthi: Emotional Money Companion</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary: #FF9933; /* Indian Saffron - Energy */
            --success: #138808; /* Indian Green - Growth */
            --buddy-blue: #000080; /* Ashoka Blue - Trust */
            --bg: #f8f9fe;
        }

        body { 
            font-family: -apple-system, sans-serif; 
            background-color: var(--bg); margin: 0; padding-bottom: 80px;
            transition: filter 0.5s ease;
        }

        body.grayscale-mode { filter: grayscale(100%); }

        /* Nudge Hub */
        .nudge-header { 
            background: linear-gradient(135deg, var(--buddy-blue), #2196F3); 
            color: white; padding: 25px 20px; border-radius: 0 0 30px 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .card { 
            background: white; margin: 15px; padding: 20px; border-radius: 20px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); position: relative;
        }

        /* Mood Chips */
        .mood-container { display: flex; gap: 10px; overflow-x: auto; padding: 10px 0; scrollbar-width: none; }
        .mood-chip { 
            padding: 10px 18px; border-radius: 20px; background: white; border: 1.5px solid #eee;
            font-size: 13px; white-space: nowrap; cursor: pointer; transition: 0.3s;
        }
        .mood-chip.active { background: var(--primary); color: white; border-color: var(--primary); transform: scale(1.05); }

        /* Unified Asset List */
        .asset-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f5f5f5; }
        .asset-label { font-size: 14px; font-weight: 500; }
        .asset-val { font-family: 'Courier New', monospace; font-weight: bold; color: var(--buddy-blue); }

        /* Progress Bar */
        .progress-container { height: 8px; background: #eee; border-radius: 4px; margin: 10px 0; }
        .progress-fill { height: 100%; background: var(--success); border-radius: 4px; transition: 1s; }

        /* Buttons */
        .btn-pulse { width: 100%; padding: 16px; background: var(--buddy-blue); color: white; border: none; border-radius: 15px; font-weight: bold; font-size: 16px; margin-top: 10px; }
        .btn-save { background: var(--success); color: white; flex: 1; padding: 12px; border-radius: 10px; border: none; font-weight: bold; }
        .btn-spend { background: #f5f5f5; color: #666; flex: 1; padding: 12px; border-radius: 10px; border: none; font-weight: bold; }

        input { width: 100%; padding: 14px; margin: 8px 0; border: 1.5px solid #eee; border-radius: 12px; box-sizing: border-box; font-size: 16px; }
        
        /* Bottom Nav */
        .nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; border-top: 1px solid #eee; z-index: 100; }
        .nav-item { flex: 1; text-align: center; padding: 15px; font-size: 11px; color: #999; }
        .nav-item.active { color: var(--buddy-blue); font-weight: bold; }
    </style>
</head>
<body>

    <div class="nudge-header">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0; font-size: 20px;">Namaste, Arjun üôè</h2>
            <div id="lang-toggle" style="font-size: 12px; background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 10px;">EN | ‡§π‡§ø‡§Ç‡§¶‡•Ä</div>
        </div>
        <p id="main-nudge" style="margin: 15px 0; font-size: 15px; line-height: 1.4; opacity: 0.95;">
            "Analyzing your safety net... You have <b>‚Çπ42,000</b> in surplus this month. Shall we move it to your <b>'Sister's Wedding'</b> Gold SIP?"
        </p>
        <div class="progress-container"><div class="progress-fill" style="width: 58%;"></div></div>
        <div style="display: flex; justify-content: space-between; font-size: 11px;">
            <span>üõ°Ô∏è Safety: 58% Secure</span>
            <span>Target: 6 Months Runway</span>
        </div>
    </div>

    <div class="card" style="margin-top: -20px;">
        <h5 style="margin: 0 0 10px 0; color: #555;">How is your heart feeling today?</h5>
        <div class="mood-container">
            <div class="mood-chip active" onclick="setMood('Calm', this)">üòå Shanti (Calm)</div>
            <div class="mood-chip" onclick="setMood('Stressed', this)">üò∞ Family Pressure</div>
            <div class="mood-chip" onclick="setMood('Excited', this)">ü§ë Salary High!</div>
            <div class="mood-chip" onclick="setMood('Bored', this)">ü•± Just Browsing</div>
        </div>
    </div>

    <div class="card">
        <h3 style="margin: 0;">üõí Pulse Check</h3>
        <p style="font-size: 12px; color: #777;">Before you scan that QR code, let's look at the impact.</p>
        <input type="text" id="item-name" placeholder="What are you buying? (e.g. Starbucks, Myntra)">
        <input type="number" id="item-price" placeholder="Amount (‚Çπ)">
        <button class="btn-pulse" onclick="runNudge()">Check Life-Impact</button>

        <div id="nudge-overlay" style="display: none; margin-top: 20px; padding: 15px; background: #fff8e1; border-radius: 15px; border-left: 5px solid var(--primary);">
            <p id="nudge-msg" style="font-size: 14px; color: #333; line-height: 1.4;"></p>
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="btn-save" onclick="resolve('save')">Move to SIP</button>
                <button class="btn-spend" onclick="resolve('spend')">I need this</button>
            </div>
        </div>
    </div>

    <div class="card">
        <h4 style="margin: 0 0 15px 0; display: flex; justify-content: space-between;">
            Wealth Summary <span>‚Çπ3,84,500</span>
        </h4>
        <div style="height: 150px; margin-bottom: 20px;">
            <canvas id="assetChart"></canvas>
        </div>
        <div class="asset-row">
            <span class="asset-label">üè¶ SBI / HDFC Savings</span>
            <span class="asset-val">‚Çπ65,200</span>
        </div>
        <div class="asset-row">
            <span class="asset-label">üìà Mutual Funds (SIP)</span>
            <span class="asset-val">‚Çπ2,80,000</span>
        </div>
        <div class="asset-row">
            <span class="asset-label">üü° Digital Gold</span>
            <span class="asset-val">‚Çπ39,300</span>
        </div>
        <button style="width: 100%; background: none; border: 1.5px dashed #ccc; color: #888; padding: 10px; border-radius: 10px; margin-top: 15px; font-size: 12px;">
            + Link via Account Aggregator (AA)
        </button>
    </div>

    <div class="nav">
        <div class="nav-item active">üè† Sarthi</div>
        <div class="nav-item">üìä Portfolio</div>
        <div class="nav-item">üõ°Ô∏è Shield</div>
        <div class="nav-item">üë• Family</div>
    </div>

    <script>
        let hourlyWage = 450; // Average young professional hourly rate

        function setMood(mood, el) {
            document.querySelectorAll('.mood-chip').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            const nudge = document.getElementById('main-nudge');
            
            if(mood === 'Stressed') {
                nudge.innerHTML = "I hear you. When things are heavy at home, we tend to spend for comfort. I've activated <b>Shield Mode</b> to protect your savings today.";
                document.body.classList.add('grayscale-mode');
            } else if(mood === 'Excited') {
                nudge.innerHTML = "Salary high! ü§ë It's tempting to splurge. Let's lock ‚Çπ5k into your <b>Emergency Fund</b> first so you can party guilt-free!";
                document.body.classList.remove('grayscale-mode');
            } else {
                nudge.innerHTML = "You're in a good headspace. Your <b>Safety Net</b> is 58% full. On track to reach your goal by Diwali!";
                document.body.classList.remove('grayscale-mode');
            }
        }

        function runNudge() {
            const name = document.getElementById('item-name').value;
            const price = document.getElementById('item-price').value;
            if(!price) return;

            const hours = (price / hourlyWage).toFixed(1);
            const msg = document.getElementById('nudge-msg');
            msg.innerHTML = `Arjun, this <b>${name}</b> costs <b>${hours} hours</b> of your hard work. üõãÔ∏è<br><br>It also pushes your <b>'New Laptop'</b> goal back by 12 days. Do you really want to scan this QR?`;
            
            document.getElementById('nudge-overlay').style.display = 'block';
        }

        function resolve(type) {
            if(type === 'save') {
                confetti();
                alert("Smart choice! ‚Çπ" + document.getElementById('item-price').value + " redirected to your Wealth Pot.");
            }
            document.getElementById('nudge-overlay').style.display = 'none';
            document.getElementById('item-name').value = '';
            document.getElementById('item-price').value = '';
        }

        // India-focused Asset Chart
        const ctx = document.getElementById('assetChart').getContext('2d');
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Cash', 'Mutual Funds', 'Gold'],
                datasets: [{
                    data: [65200, 280000, 39300],
                    backgroundColor: ['#2196F3', '#138808', '#FF9933'],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                maintainAspectRatio: false,
                plugins: { legend: { position: 'right', labels: { boxWidth: 10, font: { size: 10 } } } }
            }
        });
    </script>
</body>
</html>
            
